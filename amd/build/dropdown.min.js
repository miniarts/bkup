define(["exports","./util"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){var t="dropdown",o=".bs.dropdown",i=e.fn[t],s={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,CLICK:"click"+o,CLICK_DATA_API:"click.bs.dropdown.data-api",KEYDOWN_DATA_API:"keydown.bs.dropdown.data-api"},l={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",OPEN:"open"},d={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},u=function(){function t(e){n(this,t),this._element=e,this._addEventListeners()}return a(t,[{key:"toggle",value:function(){if(this.disabled||e(this).hasClass(l.DISABLED))return!1;var n=t._getParentFromElement(this),r=e(n).hasClass(l.OPEN);if(t._clearMenus(),r)return!1;if("ontouchstart"in document.documentElement&&!e(n).closest(d.NAVBAR_NAV).length){var a=document.createElement("div");a.className=l.BACKDROP,e(a).insertBefore(this),e(a).on("click",t._clearMenus)}var o={relatedTarget:this},i=e.Event(s.SHOW,o);return e(n).trigger(i),!i.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded","true"),e(n).toggleClass(l.OPEN),e(n).trigger(e.Event(s.SHOWN,o)),!1)}},{key:"dispose",value:function(){e.removeData(this._element,"bs.dropdown"),e(this._element).off(o),this._element=null}},{key:"_addEventListeners",value:function(){e(this._element).on(s.CLICK,this.toggle)}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var r=e(this).data("bs.dropdown");if(r||e(this).data("bs.dropdown",r=new t(this)),"string"==typeof n){if(void 0===r[n])throw new Error('No method named "'+n+'"');r[n].call(this)}})}},{key:"_clearMenus",value:function(n){if(!n||3!==n.which){var r=e(d.BACKDROP)[0];r&&r.parentNode.removeChild(r);for(var a=e.makeArray(e(d.DATA_TOGGLE)),o=0;o<a.length;o++){var i=t._getParentFromElement(a[o]),u={relatedTarget:a[o]};if(e(i).hasClass(l.OPEN)&&!(n&&"click"===n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i,n.target))){var c=e.Event(s.HIDE,u);e(i).trigger(c),c.isDefaultPrevented()||(a[o].setAttribute("aria-expanded","false"),e(i).removeClass(l.OPEN).trigger(e.Event(s.HIDDEN,u)))}}}}},{key:"_getParentFromElement",value:function(t){var n=void 0,a=r.default.getSelectorFromElement(t);return a&&(n=e(a)[0]),n||t.parentNode}},{key:"_dataApiKeydownHandler",value:function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!e(this).hasClass(l.DISABLED))){var r=t._getParentFromElement(this),a=e(r).hasClass(l.OPEN);if(!a&&27!==n.which||a&&27===n.which){if(27===n.which){var o=e(r).find(d.DATA_TOGGLE)[0];e(o).trigger("focus")}return void e(this).trigger("click")}var i=e.makeArray(e(d.VISIBLE_ITEMS));if(i=i.filter(function(e){return e.offsetWidth||e.offsetHeight}),i.length){var s=i.indexOf(n.target);38===n.which&&s>0&&s--,40===n.which&&s<i.length-1&&s++,s<0&&(s=0),i[s].focus()}}}},{key:"VERSION",get:function(){return"4.0.0-alpha.4"}}]),t}();return e(document).on(s.KEYDOWN_DATA_API,d.DATA_TOGGLE,u._dataApiKeydownHandler).on(s.KEYDOWN_DATA_API,d.ROLE_MENU,u._dataApiKeydownHandler).on(s.KEYDOWN_DATA_API,d.ROLE_LISTBOX,u._dataApiKeydownHandler).on(s.CLICK_DATA_API,u._clearMenus).on(s.CLICK_DATA_API,d.DATA_TOGGLE,u.prototype.toggle).on(s.CLICK_DATA_API,d.FORM_CHILD,function(e){e.stopPropagation()}),e.fn[t]=u._jQueryInterface,e.fn[t].Constructor=u,e.fn[t].noConflict=function(){return e.fn[t]=i,u._jQueryInterface},u}(jQuery);e.default=o});